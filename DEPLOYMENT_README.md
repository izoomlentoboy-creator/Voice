# Production Deployment Guide: Voice Disorder Detection

**Version:** 1.0.0

This guide provides comprehensive instructions for deploying, training, and managing the Voice Disorder Detection system in a production environment.

## 1. Quick Start: Automated Deployment

This method is recommended for a fast and reliable setup. A single script handles all steps from system preparation to a running production server.

**Prerequisites:**
- A fresh Ubuntu 22.04 server.
- Root access.
- At least 15GB of disk space and 4GB of RAM.

**Execution:**

1.  **Connect to your server via SSH:**

    ```bash
    ssh root@YOUR_SERVER_IP
    ```

2.  **Download and run the deployment script:**

    ```bash
    wget https://raw.githubusercontent.com/izoomlentoboy-creator/Voice/main/deploy.sh
    chmod +x deploy.sh
    ./deploy.sh
    ```

    > **Note:** The script will take approximately **30-60 minutes** to complete, depending on network speed and server performance. It will download the SVD dataset (~5-10GB) and perform multiple training phases.

3.  **Verify Deployment:**

    Once the script finishes, the API will be available. You can check its status:

    ```bash
    curl http://localhost/api/v1/health
    ```

    You should see `{"status":"ok"}`.

## 2. Deployment with Docker

For a containerized setup, use the provided Docker Compose configuration.

**Prerequisites:**
- Docker and Docker Compose installed.
- Git installed.

**Steps:**

1.  **Clone the repository:**

    ```bash
    git clone https://github.com/izoomlentoboy-creator/Voice.git
    cd Voice
    ```

2.  **Prepare Data and Models:**

    -   Download the Saarbruecken Voice Database and place it in the `./data/sbvoicedb` directory.
    -   Place your pre-trained models in the `./models` directory.

3.  **Build and Run Containers:**

    ```bash
    docker-compose -f docker-compose.production.yml up --build -d
    ```

4.  **Check Status:**

    ```bash
    docker-compose -f docker-compose.production.yml ps
    ```

    All services (`api`, `nginx`, `prometheus`, `grafana`) should be `Up`.

## 3. Manual Training and Optimization

If you need to retrain the model or perform optimizations manually, use the provided scripts.

**Prerequisites:**
- All dependencies installed (run `deploy.sh` or install manually).
- SVD dataset downloaded.

**Optimized Training (Recommended):**

This script runs the full pipeline to achieve the highest possible accuracy.

```bash
cd /opt/voice-disorder-detection
./quick_train.sh
```

**Monitoring Training:**

While `quick_train.sh` is running, you can monitor the progress in a separate terminal:

```bash
cd /opt/voice-disorder-detection
./scripts/monitor_training.py --log-file ./logs/train_augmented_*.log
```

This will display a real-time table of key performance metrics.

## 4. System Architecture and Management

### Services

-   **`voice-disorder-api` (Systemd service):** The main Gunicorn/Uvicorn application server.
-   **`nginx`:** Reverse proxy for the API, handling SSL and rate limiting.
-   **`prometheus`:** Collects metrics from the API.
-   **`grafana`:** Visualizes metrics from Prometheus.

### Key File Locations

-   **Application Code:** `/opt/voice-disorder-detection`
-   **Logs:** `/var/log/voice-disorder`
-   **Data (SVD):** `/var/lib/voice-disorder/data`
-   **Trained Models:** `/var/lib/voice-disorder/models`
-   **Nginx Config:** `/etc/nginx/sites-available/voice-disorder`
-   **Systemd Service:** `/etc/systemd/system/voice-disorder-api.service`

### Useful Commands

-   **Check API Status:**
    ```bash
    systemctl status voice-disorder-api
    ```

-   **View API Logs:**
    ```bash
    tail -f /var/log/voice-disorder/error.log
    ```

-   **Restart API Service:**
    ```bash
    systemctl restart voice-disorder-api
    ```

-   **Check Nginx Configuration:**
    ```bash
    nginx -t
    ```

-   **Reload Nginx:**
    ```bash
    systemctl reload nginx
    ```

## 5. Monitoring and Dashboards

-   **Prometheus:** `http://YOUR_SERVER_IP:9090`
-   **Grafana:** `http://YOUR_SERVER_IP:3000` (user: `admin`, password: `admin`)

A pre-configured dashboard for the Voice API will be available in Grafana.

---

*This document was generated by Manus AI on 2026-02-13.*
